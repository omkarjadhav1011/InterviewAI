{% extends 'base.html' %}
{% block title %}Results{% endblock %}
{% block content %}
<h2>Interview Results</h2>
<canvas id="resultsChart" width="400" height="200"></canvas>
<div id="resultsList"></div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const results = {{ results|tojson | safe }} || [];
  (function(){
    const labels = results.map((r, i)=> `Q${i+1}`);
    const confidence = results.map(r=> r.result.confidence);
    const technical = results.map(r=> r.result.technical);
    const communication = results.map(r=> r.result.communication);
    const ctx = document.getElementById('resultsChart').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [
          {label: 'Confidence', data: confidence, backgroundColor: 'rgba(75,192,192,0.6)'},
          {label: 'Technical', data: technical, backgroundColor: 'rgba(153,102,255,0.6)'},
          {label: 'Communication', data: communication, backgroundColor: 'rgba(255,159,64,0.6)'}
        ]
      }
    });
  })();
</script>
{% endblock %}
